<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAT å¯«ä½œè­°é¡Œ | è–èª•å¯«ä½œæ¨¹</title>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <style>
        /* ä¿æŒåŸæœ‰çš„ CSS æ¨£å¼ä¸è®Š */
        :root {
            --primary-color: #ffd700;
            --secondary-color: #1e3a5f;
            --accent-color: #0f5132;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            min-height: 100vh;
            background: linear-gradient(to bottom, #1e3a5f 0%, #0f1b3a 70%, #0a1428 100%);
            font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
            color: white;
            overflow-x: hidden;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .snow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        .snowflake {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            0% { transform: translateY(-100vh); }
            100% { transform: translateY(100vh); }
        }
        
        .tree {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: min(400px, 40vw);
            height: min(500px, 50vh);
            background: radial-gradient(circle at 50% 0%, #0f5132 30%, #0a3d1f 100%);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            opacity: 0.7;
            z-index: 1;
        }
        
        .star {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: min(80px, 12vw);
            height: min(80px, 12vw);
            background: radial-gradient(circle, #ffdd00, #ffaa00);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            box-shadow: 0 0 40px #ffd700;
            animation: twinkle 2s infinite;
            z-index: 5;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        #container {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: min(100px, 15vh);
            z-index: 2;
        }
        
        .center {
            position: sticky;
            top: 20px;
            width: min(260px, 50vw);
            height: min(260px, 50vw);
            background: radial-gradient(circle, #ffd700, #ff8c00);
            border-radius: 50%;
            box-shadow: 0 0 80px #ffd700, inset 0 0 40px rgba(255, 255, 255, 0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: clamp(24px, 5vw, 34px);
            font-weight: bold;
            text-shadow: 0 0 20px #000;
            z-index: 20;
            flex-shrink: 0;
            margin-bottom: 30px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .center:hover {
            transform: scale(1.05);
            box-shadow: 0 0 100px #ffd700, inset 0 0 50px rgba(255, 255, 255, 0.8);
        }
        
        .center span {
            font-size: clamp(18px, 4vw, 26px);
            margin-top: 10px;
        }
        
        .topics-wrapper {
            position: relative;
            width: min(900px, 90vw);
            height: min(900px, 90vw);
            margin: 50px auto;
        }
        
        .topic {
            position: absolute;
            width: min(170px, 20vw);
            height: min(170px, 20vw);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), inset 0 0 25px rgba(255, 255, 255, 0.4), 0 0 40px rgba(255, 215, 0, 0.7);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: float 7s ease-in-out infinite, shine 5s infinite;
            padding: 10px;
            box-sizing: border-box;
            z-index: 8;
            text-align: center;
            overflow: hidden;
            transform-origin: center;
        }
        
        .topic:hover {
            transform: scale(1.25) !important;
            z-index: 30;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8), inset 0 0 30px rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 215, 0, 1);
        }
        
        .topic .zh {
            font-size: clamp(14px, 2vw, 19px);
            line-height: 1.3;
            margin-bottom: 5px;
        }
        
        .topic .en {
            font-size: clamp(10px, 1.5vw, 14px);
            opacity: 0.95;
        }
        
        /* é¡è‰²é¡åˆ¥ */
        .c1 { background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b); }
        .c2 { background: radial-gradient(circle at 30% 30%, #f1c40f, #e67e22); }
        .c3 { background: radial-gradient(circle at 30% 30%, #27ae60, #1e8449); }
        .c4 { background: radial-gradient(circle at 30% 30%, #3498db, #2980b9); }
        .c5 { background: radial-gradient(circle at 30% 30%, #9b59b6, #8e44ad); }
        .c6 { background: radial-gradient(circle at 30% 30%, #e91e63, #c2185b); }
        .c7 { background: radial-gradient(circle at 30% 30%, #ff9800, #f57c00); }
        .c8 { background: radial-gradient(circle at 30% 30%, #00bcd4, #0097a7); }
        .c9 { background: radial-gradient(circle at 30% 30%, #e67e22, #d35400); }
        .c10 { background: radial-gradient(circle at 30% 30%, #95a5a6, #7f8c8d); }
        .c11 { background: radial-gradient(circle at 30% 30%, #f39c12, #e67e22); }
        .c12 { background: radial-gradient(circle at 30% 30%, #c0392b, #a93226); }
        .c13 { background: radial-gradient(circle at 30% 30%, #2ecc71, #27ae60); }
        .c14 { background: radial-gradient(circle at 30% 30%, #8e44ad, #71368a); }
        .c15 { background: radial-gradient(circle at 30% 30%, #e74c3c, #c0392b); }
        .c16 { background: radial-gradient(circle at 30% 30%, #16a085, #117a65); }
        .c17 { background: radial-gradient(circle at 30% 30%, #f1c40f, #f39c12); }
        .c18 { background: radial-gradient(circle at 30% 30%, #3498db, #2980b9); }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(3deg); }
        }
        
        @keyframes shine {
            0%, 100% { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), inset 0 0 25px rgba(255, 255, 255, 0.4), 0 0 40px rgba(255, 215, 0, 0.7); }
            50% { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), inset 0 0 25px rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 215, 0, 1); }
        }
        
        .line {
            position: absolute;
            width: 2px;
            background: linear-gradient(to bottom, transparent, #ffd700, transparent);
            box-shadow: 0 0 12px #ffd700;
            transform-origin: top left;
            animation: twinkle 3s infinite;
            pointer-events: none;
            z-index: 1;
        }
        
        #sentences {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(15, 36, 57, 0.98);
            padding: min(40px, 4vw);
            border-radius: 25px;
            max-width: min(950px, 90vw);
            width: 92%;
            max-height: 92vh;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 0 100px rgba(255, 215, 0, 0.8);
            border: 3px solid #ffd700;
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        #sentences.show {
            opacity: 1;
        }
        
        .close {
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 40px;
            cursor: pointer;
            color: #ffd700;
            transition: transform 0.3s;
        }
        
        .close:hover {
            transform: scale(1.2);
        }
        
        .sentence {
            margin: 25px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 18px;
            line-height: 1.8;
            backdrop-filter: blur(8px);
            border-left: 6px solid #ffd700;
            font-size: clamp(16px, 2.5vw, 18px);
            transition: transform 0.3s, background 0.3s;
        }
        
        .sentence:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.18);
        }
        
        .vocab {
            background: rgba(255, 215, 0, 0.25);
            padding: 3px 7px;
            border-radius: 6px;
            cursor: pointer;
            border-bottom: 2px solid #ffd700;
            position: relative;
            transition: all 0.3s;
        }
        
        .vocab:hover {
            background: rgba(255, 215, 0, 0.5);
            transform: translateY(-2px);
        }
        
        .vocab:hover::after {
            content: attr(data-trans) "ï¼ˆ" attr(data-pron) "ï¼‰";
            position: absolute;
            top: -38px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e3a5f;
            color: #ffd700;
            padding: 8px 14px;
            border-radius: 8px;
            white-space: nowrap;
            font-size: 15px;
            z-index: 10;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
        }
        
        .play-btn {
            margin-left: 18px;
            cursor: pointer;
            font-size: clamp(20px, 4vw, 28px);
            transition: transform 0.3s;
            display: inline-block;
        }
        
        .play-btn:hover {
            transform: scale(1.2);
        }
        
        /* æ–°å¢äº’å‹•å…ƒç´  */
        .instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 215, 0, 0.2);
            padding: 10px 20px;
            border-radius: 20px;
            text-align: center;
            font-size: 14px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 215, 0, 0.5);
            z-index: 5;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        .lights-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.2);
            color: white;
            border: 1px solid rgba(255, 215, 0, 0.5);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            z-index: 5;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .lights-toggle:hover {
            background: rgba(255, 215, 0, 0.4);
            transform: scale(1.05);
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 1000px) {
            .topics-wrapper {
                width: min(700px, 85vw);
                height: min(700px, 85vw);
            }
        }
        
        @media (max-width: 768px) {
            .topics-wrapper {
                width: min(500px, 90vw);
                height: min(900px, 160vw);
            }
            
            .center {
                width: min(220px, 60vw);
                height: min(220px, 60vw);
            }
            
            .topic {
                width: min(140px, 25vw);
                height: min(140px, 25vw);
            }
            
            .instructions {
                width: 90%;
                font-size: 12px;
            }
        }
        
        @media (max-width: 480px) {
            .topics-wrapper {
                width: min(400px, 95vw);
                height: min(1200px, 280vw);
            }
            
            .topic {
                width: min(120px, 28vw);
                height: min(120px, 28vw);
            }
            
            .sentence {
                padding: 15px;
                margin: 15px 0;
            }
            
            .lights-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="snow"></div>
    <div class="tree"></div>
    <div class="star"></div>
    
    <button class="lights-toggle" id="lightsToggle">âœ¨ åˆ‡æ›ç‡ˆå…‰æ•ˆæœ</button>

    <div id="container">
        <div class="center" id="centerCircle">
            GSAT å¯«ä½œè­°é¡Œ
            <span>Writing Topics</span>
        </div>
        <div class="topics-wrapper" id="topicsWrapper"></div>
    </div>

    <div class="instructions">é»æ“Šå½©ç‡ˆæŸ¥çœ‹å¯«ä½œç¯„ä¾‹ â€¢ é»æ“Šå–®å­—æŸ¥çœ‹ç¿»è­¯ â€¢ é»æ“Šå–‡å­è½ç™¼éŸ³</div>

    <div id="sentences">
        <span class="close">Ã—</span>
        <h2 id="topic-title" style="text-align:center;color:#ffd700;margin-bottom:30px;"></h2>
        <div id="sentence-list"></div>
    </div>

    <script>
        // é£„é›ªæ•ˆæœ
        const snowContainer = document.querySelector('.snow');
        function createSnowflake() {
            const s = document.createElement('div');
            s.classList.add('snowflake');
            s.style.left = Math.random() * 100 + 'vw';
            s.style.animationDuration = Math.random() * 5 + 5 + 's';
            s.style.opacity = Math.random() * 0.5 + 0.5;
            s.style.width = s.style.height = Math.random() * 8 + 5 + 'px';
            snowContainer.appendChild(s);
            setTimeout(() => s.remove(), 10000);
        }
        setInterval(createSnowflake, 800);

        const csvUrl = "https://raw.githubusercontent.com/DuCJ-creator/Shirley-AI-Writing/main/idea%20bank/topic%20writing%20ideas.csv";
        let data = [];
        const colors = ['c1','c2','c3','c4','c5','c6','c7','c8','c9','c10','c11','c12','c13','c14','c15','c16','c17','c18'];

        // é«˜éšå–®å­—åº«
        const vocabDict = {
            "equality":["å¹³ç­‰","ÉªËˆkwÉ‘ËlÉ™ti"],"fundamental":["åŸºæœ¬çš„","ËŒfÊŒndÉ™Ëˆmentl"],"despite":["å„˜ç®¡","dÉªËˆspaÉªt"],"discriminatory":["æ­§è¦–æ€§çš„","dÉªsËˆkrÉªmÉªnÉ™tÉ”Ëri"],
            "pervasive":["æ™®éçš„","pÉœËrËˆveÉªsÉªv"],"underrepresented":["ä»£è¡¨æ€§ä¸è¶³çš„","ËŒÊŒndÉ™rreprÉªËˆzentÉªd"],"parity":["å¹³ç­‰","ËˆpÃ¦rÉ™ti"],"inroads":["é€²å±•","ËˆÉªnroÊŠdz"],
            "sustainable":["æ°¸çºŒçš„","sÉ™ËˆsteÉªnÉ™bl"],"biodiversity":["ç”Ÿç‰©å¤šæ¨£æ€§","ËŒbaÉªoÊŠdaÉªËˆvÉœËrsÉ™ti"],"renewable":["å¯å†ç”Ÿçš„","rÉªËˆnuËÉ™bl"],"mitigate":["æ¸›ç·©","ËˆmÉªtÉªÉ¡eÉªt"],
            "ecosystem":["ç”Ÿæ…‹ç³»çµ±","ËˆiËkoÊŠsÉªstÉ™m"],"conservation":["ä¿è‚²","ËŒkÉ‘ËnsÉ™rËˆveÉªÊƒn"],"degradation":["é€€åŒ–","ËŒdeÉ¡rÉ™ËˆdeÉªÊƒn"],"resilience":["éŸŒæ€§","rÉªËˆzÉªliÉ™ns"],
            "empower":["è³¦æ¬Š","ÉªmËˆpaÊŠÉ™r"],"holistic":["æ•´é«”çš„","hoÊŠËˆlÉªstÉªk"],"intercultural":["è·¨æ–‡åŒ–çš„","ËŒÉªntÉ™rËˆkÊŒltÊƒÉ™rÉ™l"],"inherent":["å›ºæœ‰çš„","ÉªnËˆhÉªrÉ™nt"],
            "advocate":["å€¡å°","ËˆÃ¦dvÉ™keÉªt"],"proactive":["ä¸»å‹•çš„","proÊŠËˆÃ¦ktÉªv"],"stewardship":["ç®¡ç†è²¬ä»»","ËˆstuËÉ™rdÊƒÉªp"],"imperative":["å¿…è¦çš„","ÉªmËˆperÉ™tÉªv"],
            "prevalent":["æ™®éçš„","ËˆprevÉ™lÉ™nt"],"dignity":["å°Šåš´","ËˆdÉªÉ¡nÉ™ti"],"entitled":["æœ‰æ¬Šåˆ©çš„","ÉªnËˆtaÉªtld"],"transmit":["å‚³é","trÃ¦nsËˆmÉªt"],
            "nurture":["åŸ¹é¤Š","ËˆnÉœËrtÊƒÉ™r"],"curiosity":["å¥½å¥‡å¿ƒ","ËŒkjÊŠriËˆÉ‘ËsÉ™ti"],"lifelong":["çµ‚èº«çš„","ËˆlaÉªflÉ”ËÅ‹"],"assess":["è©•ä¼°","É™Ëˆses"],
            "trajectory":["è»Œè·¡","trÉ™ËˆdÊ’ektÉ™ri"],"mentorship":["å°å¸«åˆ¶","ËˆmentÉ”ËrÊƒÉªp"],"diversity":["å¤šæ¨£æ€§","dÉªËˆvÉœËrsÉ™ti"],"inclusivity":["åŒ…å®¹æ€§","ËŒÉªnkluËËˆsÉªvÉªti"],
            "reconciliation":["å’Œè§£","ËŒrekÉ™nsÉªliËˆeÉªÊƒn"],"heritage":["éºç”¢","ËˆherÉªtÉªdÊ’"],"indigenous":["åŸä½æ°‘çš„","ÉªnËˆdÉªdÊ’É™nÉ™s"],"preservation":["ä¿å­˜","ËŒprezÉ™rËˆveÉªÊƒn"],
            "ethical":["å€«ç†çš„","ËˆeÎ¸Éªkl"],"integrity":["èª ä¿¡","ÉªnËˆteÉ¡rÉ™ti"],"compassion":["åŒæƒ…","kÉ™mËˆpÃ¦Êƒn"],"altruism":["åˆ©ä»–","ËˆÃ¦ltruÉªzÉ™m"],
            "resilient":["æœ‰éŸŒæ€§çš„","rÉªËˆzÉªliÉ™nt"],"navigate":["æ‡‰å°","ËˆnÃ¦vÉªÉ¡eÉªt"],"interconnectedness":["ç›¸äº’é€£çµ","ËŒÉªntÉ™rkÉ™ËˆnektÉªdnÉ™s"],"empathy":["åŒç†å¿ƒ","ËˆempÉ™Î¸i"],
            "transcend":["è¶…è¶Š","trÃ¦nËˆsend"],"cohesion":["å‡èš","koÊŠËˆhiËÊ’n"],"equitable":["å…¬å¹³çš„","ËˆekwÉªtÉ™bl"],"governance":["æ²»ç†","ËˆÉ¡ÊŒvÉ™rnÉ™ns"],
            "accountability":["å•è²¬","É™ËŒkaÊŠntÉ™ËˆbÉªlÉ™ti"],"impartial":["å…¬æ­£çš„","ÉªmËˆpÉ‘ËrÊƒl"],"transparency":["é€æ˜","trÃ¦nsËˆpÃ¦rÉ™nsi"],"arbitrary":["ä»»æ„çš„","ËˆÉ‘ËrbÉ™treri"],
            "legitimacy":["æ­£ç•¶æ€§","lÉªËˆdÊ’ÉªtÉªmÉ™si"],"vigilance":["è­¦è¦º","ËˆvÉªdÊ’ÉªlÉ™ns"],"profound":["æ·±åˆ»çš„","prÉ™ËˆfaÊŠnd"],"catastrophic":["ç½é›£æ€§çš„","ËŒkÃ¦tÉ™ËˆstrÉ‘ËfÉªk"],
            "vulnerable":["è„†å¼±çš„","ËˆvÊŒlnÉ™rÉ™bl"],"mitigation":["ç·©è§£","ËŒmÉªtÉªËˆÉ¡eÉªÊƒn"],"evacuation":["ç–æ•£","ÉªËŒvÃ¦kjuËˆeÉªÊƒn"],"preparedness":["æº–å‚™","prÉªËˆperdnÉ™s"],
            "literacy":["ç´ é¤Š","ËˆlÉªtÉ™rÉ™si"],"empowerment":["è³¦æ¬Š","ÉªmËˆpaÊŠÉ™rmÉ™nt"],"inclusive":["åŒ…å®¹çš„","ÉªnËˆkluËsÉªv"],"facilitate":["ä¿ƒé€²","fÉ™ËˆsÉªlÉªteÉªt"],
            "immersive":["æ²‰æµ¸å¼çš„","ÉªËˆmÉœËrsÉªv"],"globalization":["å…¨çƒåŒ–","ËŒÉ¡loÊŠbÉ™lÉ™ËˆzeÉªÊƒn"],"citizenship":["å…¬æ°‘èº«ä»½","ËˆsÉªtÉªzÉ™nÊƒÉªp"],
            "tolerance":["å¯¬å®¹","ËˆtÉ‘ËlÉ™rÉ™ns"],"solidarity":["åœ˜çµ","ËŒsÉ‘ËlÉªËˆdÃ¦rÉ™ti"]
        };

        // è¼‰å…¥ CSV è³‡æ–™ - ä¿®æ­£è³‡æ–™è™•ç†
        Papa.parse(csvUrl, {
            download: true,
            header: true,
            complete: function(r) {
                console.log("åŸå§‹ CSV è³‡æ–™:", r.data); // é™¤éŒ¯ç”¨
                
                // éæ¿¾ä¸¦è™•ç†è³‡æ–™
                data = r.data
                    .filter(x => x.category && x['model sentence'])
                    .map(item => {
                        let sentence = item['model sentence'].trim();
                        
                        // æª¢æŸ¥å¥å­æ˜¯å¦è¢«æˆªæ–·ï¼ˆåŒ…å«æ›è¡Œæˆ–éå¸¸çŸ­ï¼‰
                        if (sentence.includes('\n') || sentence.split(' ').length < 3) {
                            console.warn('å¯èƒ½è¢«æˆªæ–·çš„å¥å­:', sentence);
                            return null; // è·³éè¢«æˆªæ–·çš„å¥å­
                        }
                        
                        // ç¢ºä¿å¥å­é–‹é ­å¤§å¯«
                        if (sentence.length > 0) {
                            sentence = sentence.charAt(0).toUpperCase() + sentence.slice(1);
                        }
                        
                        // ç¢ºä¿å¥å­æœ‰é©ç•¶çš„çµæŸæ¨™é»
                        if (!sentence.endsWith('.') && !sentence.endsWith('!') && !sentence.endsWith('?')) {
                            sentence += '.';
                        }
                        
                        item['model sentence'] = sentence;
                        return item;
                    })
                    .filter(x => x !== null);
                
                console.log("è™•ç†å¾Œçš„è³‡æ–™:", data); // é™¤éŒ¯ç”¨
                
                const topics = [...new Set(data.map(x => x.category.trim()))];
                renderTopics(topics);
            },
            error: function(err) {
                console.error('CSV è¼‰å…¥éŒ¯èª¤:', err);
                // å¦‚æœè¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨è³‡æ–™
                useFallbackData();
            }
        });

        // å‚™ç”¨è³‡æ–™
        function useFallbackData() {
            const fallbackData = [
                {
                    category: "æ•™è‚²å¹³ç­‰ Education Equality",
                    "model sentence": "Education equality ensures that every student has access to quality learning opportunities regardless of their background."
                },
                {
                    category: "ç’°å¢ƒä¿è­· Environmental Protection", 
                    "model sentence": "Environmental protection requires collective efforts to preserve natural resources for future generations."
                },
                {
                    category: "ç§‘æŠ€ç™¼å±• Technology Development",
                    "model sentence": "Technology development has revolutionized the way we communicate and access information in modern society."
                }
            ];
            
            data = fallbackData;
            const topics = [...new Set(data.map(x => x.category.trim()))];
            renderTopics(topics);
        }

        // æ¸²æŸ“ä¸»é¡Œåœ“åœˆ
        function renderTopics(topics) {
            const wrapper = document.getElementById('topicsWrapper');
            const centerX = wrapper.offsetWidth / 2;
            const centerY = wrapper.offsetHeight / 2;
            const baseRadius = Math.min(wrapper.offsetWidth, wrapper.offsetHeight) * 0.35;

            topics.forEach((n, i) => {
                const angle = (i / topics.length) * 2 * Math.PI - Math.PI / 2;
                const radius = i < 9 ? baseRadius * 0.75 : baseRadius * 1.1;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);

                const div = document.createElement('div');
                div.className = `topic ${colors[i]}`;
                div.style.left = `calc(50% + ${radius * Math.cos(angle)}px - 85px)`;
                div.style.top = `calc(50% + ${radius * Math.sin(angle)}px - 85px)`;
                div.style.animationDelay = i * 0.2 + 's';
                const zh = n.split(' ')[0];
                const en = n.split(' ').slice(1).join(' ');
                div.innerHTML = `<div class="zh">${zh}</div><div class="en">${en}</div>`;
                div.onclick = () => showSentences(n);
                wrapper.appendChild(div);

                // æ·»åŠ é€£æ¥ç·š
                const line = document.createElement('div');
                line.className = 'line';
                line.style.width = `${radius}px`;
                line.style.left = '50%';
                line.style.top = '50%';
                line.style.transform = `rotate(${angle * 180 / Math.PI}deg)`;
                line.style.transformOrigin = '0 0';
                wrapper.appendChild(line);
            });
        }

        // é¡¯ç¤ºå¥å­ - åŠ å¼·å¥å­æª¢æŸ¥
        function showSentences(topic) {
            const rows = data.filter(r => r.category.trim() === topic);
            
            console.log(`ä¸»é¡Œ "${topic}" çš„å¥å­:`, rows); // é™¤éŒ¯ç”¨
            
            if (rows.length === 0) {
                alert('æ‰¾ä¸åˆ°é€™å€‹ä¸»é¡Œçš„å®Œæ•´å¥å­ï¼Œè«‹æª¢æŸ¥ CSV æª”æ¡ˆæ ¼å¼ã€‚');
                return;
            }

            // éš¨æ©Ÿé¸æ“‡2å€‹å®Œæ•´çš„å¥å­
            const selected = rows.sort(() => 0.5 - Math.random()).slice(0, 2);

            document.getElementById('topic-title').textContent = topic;
            const list = document.getElementById('sentence-list');
            list.innerHTML = '';

            selected.forEach(item => {
                let sent = item['model sentence'].trim();

                // æœ€çµ‚æª¢æŸ¥å’Œæ¸…ç†
                if (sent) {
                    // ç§»é™¤æ‰€æœ‰æ›è¡Œç¬¦å’Œå¤šé¤˜ç©ºæ ¼
                    sent = sent.replace(/[\n\r]/g, ' ').replace(/\s+/g, ' ').trim();
                    
                    // å¼·åˆ¶å¥é¦–å¤§å¯«
                    sent = sent.charAt(0).toUpperCase() + sent.slice(1);
                    
                    // ç¢ºä¿å¥å­ä»¥å¥è™ŸçµæŸ
                    if (!sent.endsWith('.') && !sent.endsWith('!') && !sent.endsWith('?')) {
                        sent += '.';
                    }
                    
                    // æª¢æŸ¥å¥å­é•·åº¦
                    if (sent.split(' ').length < 4) {
                        console.warn('å¥å­å¤ªçŸ­ï¼Œå¯èƒ½ä¸å®Œæ•´:', sent);
                        return; // è·³éå¤ªçŸ­çš„å¥å­
                    }
                }

                sent = highlightVocab(sent);
                const div = document.createElement('div');
                div.className = 'sentence';
                div.innerHTML = `<span>${sent}</span><span class="play-btn" onclick="speak(this.previousElementSibling.textContent)">ğŸ”Š</span>`;
                list.appendChild(div);
            });

            const sentencesDiv = document.getElementById('sentences');
            sentencesDiv.style.display = 'block';
            setTimeout(() => {
                sentencesDiv.classList.add('show');
            }, 10);
        }

        // é«˜äº®å–®å­—
        function highlightVocab(text) {
            let result = text;
            Object.keys(vocabDict).forEach(w => {
                const regex = new RegExp(`\\b${w}\\b`, 'gi');
                result = result.replace(regex, `<span class="vocab" data-trans="${vocabDict[w][0]}" data-pron="${vocabDict[w][1]}">${w}</span>`);
            });
            return result;
        }

        // èªéŸ³åŠŸèƒ½
        function speak(text) {
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'en-US';
            utter.rate = 0.85;
            speechSynthesis.speak(utter);
        }

        // é—œé–‰å¥å­è¦–çª—
        document.querySelector('.close').onclick = () => {
            const sentencesDiv = document.getElementById('sentences');
            sentencesDiv.classList.remove('show');
            setTimeout(() => {
                sentencesDiv.style.display = 'none';
            }, 300);
        };

        // é»æ“ŠèƒŒæ™¯é—œé–‰å¥å­è¦–çª—
        document.getElementById('sentences').addEventListener('click', (e) => {
            if (e.target === document.getElementById('sentences')) {
                const sentencesDiv = document.getElementById('sentences');
                sentencesDiv.classList.remove('show');
                setTimeout(() => {
                    sentencesDiv.style.display = 'none';
                }, 300);
            }
        });

        // æ–°å¢äº’å‹•åŠŸèƒ½
        document.getElementById('centerCircle').addEventListener('click', () => {
            alert('ğŸ„ è–èª•å¯«ä½œæ¨¹ ğŸ„\né»æ“Šå‘¨åœçš„å½©ç‡ˆæŸ¥çœ‹ä¸åŒä¸»é¡Œçš„å¯«ä½œç¯„ä¾‹ï¼');
        });

        // ç‡ˆå…‰åˆ‡æ›åŠŸèƒ½
        let lightsOn = true;
        document.getElementById('lightsToggle').addEventListener('click', () => {
            const topics = document.querySelectorAll('.topic');
            const lines = document.querySelectorAll('.line');
            const star = document.querySelector('.star');
            
            if (lightsOn) {
                // é—œé–‰ç‡ˆå…‰
                topics.forEach(topic => {
                    topic.style.animationPlayState = 'paused';
                    topic.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.2)';
                });
                
                lines.forEach(line => {
                    line.style.animationPlayState = 'paused';
                    line.style.opacity = '0.2';
                });
                
                star.style.animationPlayState = 'paused';
                star.style.opacity = '0.5';
                
                document.getElementById('lightsToggle').textContent = 'âœ¨ é–‹å•Ÿç‡ˆå…‰æ•ˆæœ';
            } else {
                // é–‹å•Ÿç‡ˆå…‰
                topics.forEach(topic => {
                    topic.style.animationPlayState = 'running';
                    topic.style.boxShadow = '';
                });
                
                lines.forEach(line => {
                    line.style.animationPlayState = 'running';
                    line.style.opacity = '1';
                });
                
                star.style.animationPlayState = 'running';
                star.style.opacity = '1';
                
                document.getElementById('lightsToggle').textContent = 'âœ¨ åˆ‡æ›ç‡ˆå…‰æ•ˆæœ';
            }
            
            lightsOn = !lightsOn;
        });

        // æ·»åŠ éµç›¤å¿«æ·éµ
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const sentencesDiv = document.getElementById('sentences');
                if (sentencesDiv.style.display === 'block') {
                    sentencesDiv.classList.remove('show');
                    setTimeout(() => {
                        sentencesDiv.style.display = 'none';
                    }, 300);
                }
            }
        });

        // ç¢ºä¿é é¢å±…ä¸­
        window.addEventListener('load', () => {
            document.body.style.justifyContent = 'flex-start';
        });
    </script>
</body>
</html>
